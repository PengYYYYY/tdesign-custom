import{i as h,f as D,j as S,g as M,E as _,H as k,V as N,k as A}from"./index.7bc89517.js";import{L}from"./index.30fec03a.js";import{g as j,m as P,a as z,r as B,b as H}from"./render-tnode.dfc92ed6.js";import{g as q}from"./dom.0201a9cf.js";/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */var K=["info","success","warning","error","question","loading"],s="32px",$={top:{top:s,left:"50%",transform:"translateX(-50%)"},center:{left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"},left:{left:s,top:"50%",transform:"translateY(-50%)"},bottom:{bottom:s,left:"50%",transform:"translateX(-50%)"},right:{right:s,top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"flex-end"},"top-left":{left:s,top:s},"top-right":{right:s,top:s,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-right":{right:s,bottom:s,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-left":{left:s,bottom:s}},T=Object.keys($);/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */var G={closeBtn:{type:[String,Boolean,Function],default:void 0},content:{type:[String,Function]},duration:{type:Number,default:3e3},icon:{type:[Boolean,Function],default:!0},theme:{type:String,default:"info",validator:function(e){return e?["info","success","warning","error","question","loading"].includes(e):!0}},onClose:Function,onCloseBtnClick:Function,onDurationEnd:Function};/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */var w={duration:200,easing:"linear"};function X(n,e){if(!!n){var t=(n==null?void 0:n.offsetWidth)||0,r=(n==null?void 0:n.offsetHeight)||0,i=R(e,t,r);if(!!i){var o=i[i.length-1];E(n,o),n.animate&&n.animate(i,w)}}}function Y(n,e,t){if(!!n){var r=(n==null?void 0:n.offsetHeight)||0,i=U(e,r);if(!i)return t();var o=i[i.length-1];E(n,o);var a=n.animate&&n.animate(i,w);a?a.onfinish=function(){n.style.display="none",t()}:(n.style.display="none",t())}}function E(n,e){for(var t=Object.keys(e),r=0;r<t.length;r+=1){var i=t[r];n.style[i]=e[i]}}function R(n,e,t){if(!T.includes(n))return null;if(["top-left","left","bottom-left"].includes(n))return[{opacity:0,marginLeft:"-".concat(e,"px")},{opacity:1,marginLeft:"0"}];if(["top-right","right","bottom-right"].includes(n))return[{opacity:0,marginRight:"-".concat(e,"px")},{opacity:1,marginRight:"0"}];if(["top","center"].includes(n))return[{opacity:0,marginTop:"-".concat(t,"px")},{opacity:1,marginTop:"0"}];if(["bottom"].includes(n))return[{opacity:0,transform:"translate3d(0, ".concat(t,"px, 0)")},{opacity:1,transform:"translate3d(0, 0, 0)"}]}function U(n,e){if(!T.includes(n))return null;if(["bottom-left","bottom","bottom-right"].includes(n)){var t="".concat(e,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:t}]}var r="-".concat(e,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:r}]}/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */function O(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O(Object(t),!0).forEach(function(r){h(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var V=j("message"),J=P(V,z()).extend({name:"TMessage",props:b(b({},G),{},{placement:String}),data:function(){return{timer:null}},computed:{classes:function(){var e=this,t={};return K.forEach(function(r){t["".concat(e.classPrefix,"-is-").concat(r)]=e.theme===r}),[this.componentName,t,h({},"".concat(this.classPrefix,"-is-closable"),this.closeBtn||this.$scopedSlots.closeBtn)]}},created:function(){this.duration&&this.setTimer()},mounted:function(){var e=this.$refs.msg;X(e,this.$props.placement)},methods:{setTimer:function(){var e=this;!this.duration||(this.timer=Number(setTimeout(function(){var t,r;e.clearTimer();var i=e.$refs.msg;Y(i,e.$props.placement,function(){e.$emit("duration-end"),e.$emit("close")}),(t=e.onDurationEnd)===null||t===void 0||t.call(e),(r=e.onClose)===null||r===void 0||r.call(e,{trigger:"duration-end"})},this.duration)))},clearTimer:function(){this.duration&&clearTimeout(this.timer)},close:function(e){var t,r;this.$emit("close-btn-click",{e}),this.$emit("close"),(t=this.onCloseBtnClick)===null||t===void 0||t.call(this,{e}),(r=this.onClose)===null||r===void 0||r.call(this,{trigger:"close-click",e})},renderClose:function(){var e=this.$createElement,t=this.useGlobalIcon({CloseIcon:D}),r=t.CloseIcon,i=e(r);return e("span",{class:"".concat(this.componentName,"__close"),on:{click:this.close}},[B(this,"closeBtn",i)])},renderIcon:function(){var e=this.$createElement;if(this.icon!==!1){if(typeof this.icon=="function")return this.icon(this.$createElement);if(this.$scopedSlots.icon)return this.$scopedSlots.icon(null);var t=this.useGlobalIcon({InfoCircleFilledIcon:S,CheckCircleFilledIcon:M,ErrorCircleFilledIcon:_,HelpCircleFilledIcon:k}),r=t.InfoCircleFilledIcon,i=t.CheckCircleFilledIcon,o=t.ErrorCircleFilledIcon,a=t.HelpCircleFilledIcon,u={info:r,success:i,warning:o,error:o,question:a,loading:L}[this.theme];return e(u)}}},render:function(){var e=arguments[0];return e("div",{ref:"msg",class:this.classes,on:{mouseenter:this.clearTimer,mouseleave:this.setTimer}},[this.renderIcon(),H(this,"default","content"),this.renderClose()])}});/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */function I(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I(Object(t),!0).forEach(function(r){h(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var W=j("message__list"),g=5e3,Z=function(){var n=0;return function(){return n+=1,n}}(),Q=P(W).extend({name:"TMessageList",components:{TMessage:J},props:{zIndex:Number,placement:String},data:function(){return{list:[]}},computed:{styles:function(){return f(f({},$[this.placement]),{},{zIndex:this.zIndex!==g?this.zIndex:g})}},methods:{add:function(e){var t=f(f({},e),{},{key:Z(),placement:this.placement});return this.list.push(t),this.list.length-1},remove:function(e){this.list.splice(e,1)},removeAll:function(){this.list=[]},getOffset:function(e){if(!!e)return isNaN(Number(e))?e:"".concat(e,"px")},msgStyles:function(e){return e.offset&&{position:"relative",left:this.getOffset(e.offset[0]),top:this.getOffset(e.offset[1])}},getListeners:function(e){var t=this;return{"close-btn-click":function(){return t.remove(e)},"duration-end":function(){return t.remove(e)}}}},render:function(){var e=this,t=arguments[0];if(!!this.list.length)return t("div",{class:this.componentName,style:this.styles},[this.list.map(function(r,i){return t("t-message",{key:r.key,style:e.msgStyles(r),props:f({},r),on:f({},e.getListeners(i))})})])}});/**
 * tdesign v0.49.3
 * (c) 2022 tdesign
 * @license MIT
 */function C(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function d(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C(Object(t),!0).forEach(function(r){h(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var l=new Map,p={duration:3e3,attach:"body",zIndex:g,placement:"top"};function ee(n){var e=d(d({},p),n);return e.content=n.content,e}var te=function(e){var t=ee(e),r=t.attach,i=t.placement,o=q(r);l.get(o)||l.set(o,{});var a=l.get(o)[i];if(a)a.add(t);else{var u=new Q({propsData:{zIndex:t.zIndex,placement:t.placement}}).$mount();u.add(t),l.get(o)[i]=u,o.appendChild(u.$el)}return new Promise(function(F){var v=l.get(o)[i];v.$nextTick(function(){var y=v.$children;F(y[y.length-1])})})},c=function(e,t,r){var i={theme:e};return typeof t=="string"?i.content=t:A(t)==="object"&&!(t instanceof Array)&&(i=d(d({},i),t)),(r||r===0)&&(i.duration=r),te(i)},ne=function(e){var t=e.placement,r=e.attach,i=e.offset,o=e.zIndex;r&&(p.attach=r),i&&(p.offset=i),t&&(p.placement=t),o&&(p.zIndex=o)},x={info:function(e,t){return c("info",e,t)},success:function(e,t){return c("success",e,t)},warning:function(e,t){return c("warning",e,t)},error:function(e,t){return c("error",e,t)},question:function(e,t){return c("question",e,t)},loading:function(e,t){return c("loading",e,t)},close:function(e){e.then(function(t){return t.close()})},closeAll:function(){l instanceof Map&&l.forEach(function(e){Object.keys(e).forEach(function(t){var r=e[t];r.list=[]})})},config:ne},m=c;Object.keys(x).forEach(function(n){m[n]=x[n]});m.install=function(){N.prototype.$message=m};export{m as M};
